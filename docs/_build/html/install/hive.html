

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Hive &mdash; SiestaTime beta documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Client" href="client.html" />
    <link rel="prev" title="Dependencies" href="dependencies.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> SiestaTime
          

          
            
            <img src="../_static/STicon.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0b1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="dependencies.html">Dependencies</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Hive</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-this-does-what-is-hive">What this does? What is Hive?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#online-aws">Online - AWS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#offline">Offline</a></li>
<li class="toctree-l2"><a class="reference internal" href="#uninstall">Uninstall</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="client.html">Client</a></li>
</ul>
<p class="caption"><span class="caption-text">Adding Ressources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../resources/operators.html">Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/vpc.html">Virtual Private Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/domains.html">Domains</a></li>
</ul>
<p class="caption"><span class="caption-text">Hive Status</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hive/jobslogs.html">Jobs,Logs</a></li>
</ul>
<p class="caption"><span class="caption-text">Deployment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../deployment/implants.html">Implants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment/postservers.html">Post. Servers</a></li>
</ul>
<p class="caption"><span class="caption-text">Interactions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../interactions/bichitos.html">Bichitos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interactions/consolecommands.html">Job-Based Console</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interactions/postinteractions.html">Post-Exploitation</a></li>
</ul>
<p class="caption"><span class="caption-text">Reporting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reporting/basicreport.html">Basic Reports</a></li>
</ul>
<p class="caption"><span class="caption-text">Concepts,Bugs and Dependencies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../misc/concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/bugs.html">Bugs</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SiestaTime</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Hive</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/install/hive.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="hive">
<h1>Hive<a class="headerlink" href="#hive" title="Permalink to this headline">¶</a></h1>
<p>Hive is the main Operations Server of Siesta Time. Is the first element that needs to be deployed.
The user has the option to do it “Offline”, or using terraform to deploy Hive with target Virtual Private Cloud resources.
Configurations of target VPC to use will be saved in a txt file by the syntax of: <code class="docutils literal notranslate"><span class="pre">./SiestaTime/installconfig/config&lt;VPC&gt;.txt</span></code>
There is the option to deploy without using a VPC, or <code class="docutils literal notranslate"><span class="pre">Offline</span></code>, this will install Hive in the current host.</p>
<div class="section" id="what-this-does-what-is-hive">
<h2>What this does? What is Hive?<a class="headerlink" href="#what-this-does-what-is-hive" title="Permalink to this headline">¶</a></h2>
<p>Hive is the main “Operation Server”. Hive will receive every command/job from authenticated clients and process or redirect them to a target foothold.
The main DB of siesta time will be in this server, with all information/configurations from the red team operators’ actions.</p>
<ul class="simple">
<li>Install in the instalator’s device host system dependencies (gcc,apache utils,…)</li>
<li>Parse config&lt;VPC&gt;.txt file, use the parameters for creating a hive.tf (terraform plan)</li>
<li>Download Go and the required dependencies to compile Hive.</li>
<li>Create Hive sqlite DB</li>
<li>Download Terraform and apply plan</li>
</ul>
<p>In the same way, the hive.tf plan will (and this will be performed in the same host if Offline):</p>
<ul class="simple">
<li>Install Hive OS/Distro. dependencies</li>
<li>Download go and their dependencies, to be able to compile Implants</li>
<li>Download Terraform and terraform plugins</li>
<li>Create <code class="docutils literal notranslate"><span class="pre">/usr/local/STHive</span></code> folder structure</li>
<li>Upload OS dependencies, keys, sqite DB, compiled Hive binary …</li>
<li>Configure Hive as a service</li>
</ul>
</div>
<div class="section" id="online-aws">
<h2>Online - AWS<a class="headerlink" href="#online-aws" title="Permalink to this headline">¶</a></h2>
<p><strong>Steps to Prepare AWS Servers</strong></p>
<ul class="simple">
<li><dl class="first docutils">
<dt>Find EC2 Information</dt>
<dd><ul class="first last">
<li>Prepare AWS key and credentials for target VPC</li>
<li>AccessKey/SecretKey</li>
<li>EC2 → “My Security Credentials” → “Access Keys”</li>
<li><a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/finding-an-ami.html">ami</a></li>
<li><a class="reference external" href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Concepts.RegionsAndAvailabilityZones.html">region</a></li>
<li>Create key pair on target region and Download “.pem” key</li>
</ul>
</dd>
</dl>
</li>
<li>Complete <code class="docutils literal notranslate"><span class="pre">SiestaTime/installConfig/configAWS.txt</span></code></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">USERNAME</span> <span class="p">:</span> <span class="n">Admin</span> <span class="n">Username</span>
<span class="n">PASSWORD</span> <span class="p">:</span> <span class="n">Admin</span> <span class="n">password</span>
<span class="n">port</span> <span class="p">:</span> <span class="n">HTTPS</span> <span class="n">Hive</span> <span class="n">port</span> <span class="n">listener</span>
<span class="n">accesskey</span><span class="p">:</span> <span class="n">AWS</span> <span class="n">accesskey</span>
<span class="n">secretkey</span><span class="p">:</span> <span class="n">AWS</span> <span class="n">secretkey</span>
<span class="n">Region</span><span class="p">:</span> <span class="n">AWS</span> <span class="n">region</span>
<span class="n">Keyname</span><span class="p">:</span> <span class="n">AWS</span> <span class="n">keyname</span> <span class="p">(</span><span class="n">without</span> <span class="o">.</span><span class="n">pem</span><span class="p">)</span>
<span class="n">ami</span><span class="p">:</span> <span class="n">aws</span> <span class="n">ami</span>
<span class="n">itype</span><span class="p">:</span> <span class="n">AWS</span> <span class="n">ec2</span> <span class="n">itype</span>
</pre></div>
</div>
<ul class="simple">
<li>Copy AWS key to <code class="docutils literal notranslate"><span class="pre">SiestaTime/installConfig/&lt;keyname&gt;.pem</span></code></li>
<li>Run</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><style type="text/css">
span.prompt1:before {
  content: "$ ";
}
</style><span class="prompt1">./hive.sh installaws</span>
</pre></div></div></div>
<div class="section" id="offline">
<h2>Offline<a class="headerlink" href="#offline" title="Permalink to this headline">¶</a></h2>
<p>Offline option let operators to install hive in a target host without the use of terraform or any kind of VPC credentials.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">./hive.sh installOffline</span>
</pre></div></div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Every installing option come with a “No Darwin” version of it. This will let hive to work without the need of Darwin dependencies (but loosing MacOSX implant abilities)</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">./hive.sh installawsNoDarwin</span>
<span class="prompt1">./hive.sh installOfflineNoDarwin</span>
<span class="prompt1"><span class="o">[</span>...<span class="o">]</span></span>
</pre></div></div></div>
<div class="section" id="uninstall">
<h2>Uninstall<a class="headerlink" href="#uninstall" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">./hive.sh remove</span>
</pre></div></div><div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">When installed Offline remove will not erase created/configured host data and packages</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="client.html" class="btn btn-neutral float-right" title="Client" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="dependencies.html" class="btn btn-neutral float-left" title="Dependencies" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Alvaro Folgado

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>